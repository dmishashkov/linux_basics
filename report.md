# Операционные системы UNIX/Linux (Базовый)

Установка и обновления системы Linux. Основы администрирования.  

## Часть 1. Установка ОС

- Установка и проверка версии OC \
  ![part1](./images/part1/install.jpg)  

## Часть 2. Создание пользователя  

- Создание нового пользователя \
  ![part2](./images/part2/create_user.jpg)  

- Добавление его в группу adm и проверка \
  ![part2](./images/part2/add_group_and_check.jpg)

## Часть 3. Настройка сети OС

- Меняем имя машины \
  ![part3](./images/part3/set_hostname.jpg)

- Установка временной зоны \
  ![part3](./images/part3/set_timezone.jpg)

- Вывод названия сетевых интерфейсов \
  ![part3](./images/part3/get_network.jpg)

**lo (loopback device)** – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost. Посмотреть привязку можно в файле /etc/hosts.

- Вывод внешнего и внутренного IP адреса шлюза \
  ![part3](./images/part3/default.jpg)

- Вывод IP адреса, полученного от DHCP сервера \
  ![part3](./images/part3/dhcp.jpg)

**DHCP** — протокол прикладного уровня модели TCP/IP, служит для назначения IP-адреса клиенту. Это следует из его названия — Dynamic Host Configuration Protocol. IP-адрес можно назначать вручную каждому клиенту, то есть компьютеру в локальной сети. Но в больших сетях это очень трудозатратно, к тому же, чем больше локальная сеть, тем выше возрастает вероятность ошибки при настройке. Поэтому для автоматизации назначения IP был создан протокол DHCP.

- Изначальные настройки \
  ![part3](./images/part3/was.png)

- Новые настройки \
  ![part3](./images/part3/end.png)
- Пинги \
  ![part3](./images/part3/ping.png)

## Часть 4. Обновление OС

- Проверка что все пакеты находятся в последней версии \
  ![part4](./images/part4/all_updated.jpg)

## Часть 5. Использование команды **sudo**

- Разрешение пользователю, созданного в части 2, выполнять команду sudo \
  ![part5](./images/part5/adding_sudo.jpg)

- Изменение hostname \
  ![part5](./images/part5/using_sudo.jpg)

**Sudo** - позволяет позволяет "подменить" права пользователя до рута, позволяя ему выполнять команды, доступные только для суперпользователя

## Часть 6. Установка и настройка службы времени

- Вывод времени, часового пояса **(timedatectl set-ntp on)** \
  ![part6](./images/part6/show_time.jpg)

## Часть 7. Установка и использование текстовых редакторов

- Редактор VIM \
  ![part7](./images/part7/vim_install.png)

- Редактор nano \
  ![part7](./images/part7/nano_install.jpg)

- Редактор joe \
  ![part7](./images/part7/joe_install.png)

- Создание текстового файла и его сохранение при помощи vim. Для перехода в INSERT MODE используется команда i, для выхода ESC, \
для записи - команда :wq <имя файла>. Сам редактор открывается при помощи команды vim \
  ![part7](./images/part7/vim_test.png)

- Создание текстового файла и его сохранение при помощи nano. Для сохранения текста нажимаем CTRL-O и вводим название файла, затем CTRL-X для выхода. \
Сам редактор открывается при помощи команды nano \
  ![part7](./images/part7/nano_test.png)

- Создание текстового файла и его сохранение при помощи joe. Для сохранения и выхода жмем CTRL и затем пишем KX. \
Сам редактор вызывается при помощи команды joe \
  ![part7](./images/part7/nano_test.png)

- Изменение текстового файла и выход из него при помощи vim. Для выхода без сохранения использовал :q! \
  ![part7](./images/part7/vim_quit.png)

- Изменение текстового файла и выход из него при помощи nano. Для выхода жмем CTRL-X, затем жмем N чтобы файл не сохранился \
  ![part7](./images/part7/nano_quit.png)

- Изменение текстового файла и выход из него при помощи joe. Для выхода жмем CTRL-C, затем жмем y чтобы файл не сохранился \
  ![part7](./images/part7/joe_quit.png)

- Поиск и замена слова при помощи vim. Используется команда вида :%s/<search_term>/<replace_term>/g g - все вхождения, без него только одно \
В моем случае заменяются все слова hello на aboba \
  ![part7](./images/part7/vim_replace.png)

- Поиск и замена слова при помощи nano. Жмем CTRL-\\, вводим шаблон, затем чем заменить, можно выбрать интерактивно что заменять, а что нет, можно заменить сразу всё  \
![part7](./images/part7/nano_replace.png)

- Поиск и замена слова при помощи joe. Жмем CTRL-K, затем F и пишем нужный шаблон, потом жмем R и пишем шаблон, которым надо поменять\
![part7](./images/part7/joe_replace.png)

## Часть 8. Установка и базовая настройка сервиса **SSHD**

- Добавление в автозапуск  
  ![part8](./images/part8/boot_ssh.png)

- Всё работает \
  ![part8](./images/part8/proof.png)

- Перенастройка на 2022 порт \
  ![part8](./images/part8/nano_etc_ssh_sshd_config.png)

- Всё работает \
  ![part8](./images/part8/proof_port.png)

Ключи **tan**: t - показывает **TCP** соединения (**ssh** работает через tcp), a - все соединения, включая не слушающие, а n выводит в числовом формате \
**State** - слушает сокет или нет, **Local** - локальный адрес, **Foreign** - адрес другого конца сокета (кто подключён).

## Часть 9. Установка и использование утилит **top**, **htop**

- Запуск команды top \
  ![part9](./images/part9/top.jpg)

  Uptime = 1:11, авторизированных - 1 пользователь, загрузка (load average 0), всего 96 процессов, загрузка процессора - 3.2%, Загрузка памяти - 1.8%, 3951 и 1 соответственно

- Запуск команды htop, с сортировкой по PID **(htop --sort-key PID)** \
  ![part9](./images/part9/htop_PID.jpg)

- Запуск команды htop, с сортировкой по PERCENT_CPU **(htop --sort-key PERCENT_CPU)** \
  ![part9](./images/part9/htop_PERCENT_CPU.jpg)

- Запуск команды htop, с сортировкой по PERCENT_MEM **(htop --sort-key PERCENT_MEM)** \
  ![part9](./images/part9/htop_PERCENT_MEM.jpg)

- Запуск команды htop, с сортировкой по TIME **(htop --sort-key TIME)**\
  ![part9](./images/part9/htop_TIME.jpg)

- Запуск команды htop, с фильтрацией по sshd \
  ![part9](./images/part9/htop_sshd.png)

- Запуск команды htop с процессом syslog \
  ![part9](./images/part9/htop_syslog.png)

- Запуск команды htop с hostname и т.д. \
  ![part9](./images/part9/htop_hostname.png)

## Часть 10. Использование утилиты **fdisk**

- Запуск команды fdisk -l (вывод большой использовал nano, можно через less) \
  ![part10](./images/part10/1.png) \
  ![part10](./images/part10/2.png) \
  ![part10](./images/part10/3.png) \
  ![part10](./images/part10/swap.png) \

  Название диска: /dev/sda \
  Размер диска: 26.16 гигабайт \
  Количество секторов: 54853440 \
  Своп: 1999868 килобайт

## Часть 11. Использование утилиты **df**

- Запуск команды df \
  ![part11](./images/part11/df.png)

  Размер раздела: 123355464 \
  Занято: 470040 \
  Доступно: 7006540 \
  Процент использования: 41 \
  Единица измерения: Килобайт
  
- Запуск команды df -Th \
  ![part11](./images/part11/df_th.png)

  Размер раздела: 12 \
  Занято: 4.5 \
  Доступно: 6.7\
  Процент использования: 41 \
  Единица измерения: гигабайт
  Файловая система: ext4

## Часть 12. Использование утилиты **du**

- Запуск команды du \
  ![part12](./images/part12/du.png)

- Запуск команды du (человекочитаемый вид, в байтах) \
  ![part12](./images/part12/du_readable.png)

- Запуск команды du для каждого вложенного \
  ![part12](./images/part12/du_rec.png)

## Часть 13. Установка и использование утилиты **ncdu**

- Установка команды ncdu \
  ![part13](./images/part13/install.png)
- Память для /home (sudo ncdu /home) \
  ![part13](./images/part13/ncdu_1.png)
- Память для /var (sudo ncdu /var) \
  ![part13](./images/part13/ncdu_2.png)
- Память для /var/log (sudo ncdu /var/log) \
  ![part13](./images/part13/ncdu_3.png)


## Часть 14. Работа с системными журналами

- syslog \
  ![part14](./images/part14/syslog.png)
- dmesg \
  ![part14](./images/part14/dmesg.png)
- authlog \
  ![part14](./images/part14/authlog.png)

  Последнее время авторизации: 9 мая 14:34:56 пользователь lancelmi

- Перезапуск ssh и вывод в auth.log \
  ![part14](./images/part14/restart_ssh.png)

## Часть 15. Использование планировщика заданий **CRON**

- Жмём crontab -e \
  ![part15](./images/part15/crontab_add_task.png)
- Доказательство что команда действительно выполнялась \
  ![part15](./images/part15/cron_proof.png)
- Текущие задания для crontab \
  ![part15](./images/part15/crontab_current.png)
- Удаление всех заданий из планировщике и вывод (Удалялось командой crontab -r) \
  ![part15](./images/part15/crontab_delete.png)
